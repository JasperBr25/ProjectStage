!function(){"use strict";var e,t=[],n=[],a=0,o=function(t){var n=new XMLHttpRequest;n.open("GET","../src/data/queries.json",!0),n.onload=function(){if(n.status>=200&&n.status<400){var a=JSON.parse(n.response);e=function(e,t){for(var n=0;n<e.length;n++)if(e[n].id+""===t)return e[n];return console.warn("query not found in global array"),null}(a.data,t),document.getElementById("selectdataset-id").disabled=!0,document.getElementById("select-resource").disabled=!0,u(e)}else console.warn(n.response)},n.send()},l=function(e){for(var t=document.getElementById("selectdataset-id"),n=0;n<e.length;n++){var a=document.createElement("option");a.innerText=e[n].title,a.value=e[n].id,t.appendChild(a)}},d=function(e){for(var t=document.getElementById("select-formaat"),n=0;n<e.length;n++){var a=document.createElement("option");a.innerText=e[n].format,a.value=e[n].format,t.appendChild(a)}},r=function(e){for(var t=document.getElementById("select-aantal"),n=0;n<e.length;n++){var a=document.createElement("option");a.innerText=e[n].aantal,a.value=e[n].aantal,t.appendChild(a)}},u=function(e){if(null!==e&&""!==e){document.getElementById("textarea_idP1").value=e.query}else console.log("qry must be not null!")},s=function(){var e=document.getElementById("textarea_idP1"),t=document.getElementById("select-formaat"),n=e.value;document.getElementById("resultTable").innerHTML="",document.getElementById("nextbutton").hidden=!1,document.getElementById("prevbutton").hidden=!1,document.getElementById("prevbutton").disabled=!0;try{"HTML"===t.value&&(n=n+" limit 10 offset "+a);var o,l=encodeURIComponent(n);o="format"===t.options[t.selectedIndex].value?"https://stad.gent/sparql?default-graph-uri=&query="+l+"&format=JSON&timeout=0&debug=o":"https://stad.gent/sparql?default-graph-uri=&query="+l+"&format="+(t=t.value)+"&timeout=0&debug=on","HTML"===t?c(o):window.location.href=o}catch(e){document.getElementById("demo").innerHTML=e.message}},c=function(e){var t=new XMLHttpRequest;t.open("GET",e,!0),console.log(e),t.onload=function(){if(t.status>=200&&t.status<400){t.response,document.getElementById("resultTable");t.response,document.getElementById("resultTable").innerHTML=t.response}else console.warn(t.response)},t.send()};!function(){var e=function(e,t){var n=t||window.location.href,a=new RegExp("[?&]"+e+"=([^&#]*)","i").exec(n);return a?a[1]:null}("query");null!==e?o(e):document.getElementById("textarea_idP1").value="SELECT *\nFROM <[DATASET]>\nWHERE {\n[?s a resource]\n[rest van query]\n} \nLIMIT [aantal] \nOFFSET [offset]"}(),function(){var e=new XMLHttpRequest;e.open("GET","../src/data/datasets.json",!0),e.onload=function(){if(e.status>=200&&e.status<400){var n=JSON.parse(e.response);t=n.dataset,l(t)}else console.warn(e.response)},e.send()}(),function(e){var t=new XMLHttpRequest;t.open("GET","../src/data/format.json",!0),t.onload=function(){if(t.status>=200&&t.status<400){var n=JSON.parse(t.response);e=n.format,d(e)}else console.warn(t.response)},t.send()}([]),function(e){var t=new XMLHttpRequest;t.open("GET","../src/data/aantal.json",!0),t.onload=function(){if(t.status>=200&&t.status<400){var n=JSON.parse(t.response);e=n.AantalRes,r(e)}else console.warn(t.response)},t.send()}([]),function(){var e=new XMLHttpRequest;e.open("GET","../src/data/resource.json",!0),e.onload=function(){if(e.status>=200&&e.status<400){var t=JSON.parse(e.response);n=t}else console.warn(e.response)},e.send()}(),function(){var o=document.getElementById("selectdataset-id"),l=document.getElementById("select-resource"),d=document.getElementById("select-aantal"),r=document.getElementById("nextbutton"),c=document.getElementById("prevbutton");document.getElementById("sharebutton");o.addEventListener("change",function(e){var a=e.target.value;!function(e){for(var n,a=document.getElementById("textarea_idP1"),o=a.value,l=o.indexOf("WHERE"),d=o.indexOf("FROM"),r=0;r<t.length;r++){var u=t[r];u.id+""===e&&(n=u.from)}-1!==d&&(l=(o=[o.slice(0,d),o.slice(l)].join("")).indexOf("WHERE")),o=[o.slice(0,l),n," ",o.slice(l)].join(""),a.value=o}(a),function(e){var t=[],a=document.getElementById("select-resource");a.options.length=0;for(var o=0;o<n.length;o++){var l=n[o];l.datasetid+""===e&&t.push(l)}var d=document.createElement("option");d.value="Resource",d.innerText="--selecteer--",d.disabled=!0,d.selected=!0,a.appendChild(d);for(var r=0;r<t.length;r++){var u=document.createElement("option");u.innerText=t[r].titel,u.value=t[r].gegeven,a.appendChild(u)}}(a)}),document.getElementById("buttonuitvoeren").addEventListener("click",function(e){e.preventDefault(),a=0;try{s()}catch(e){document.getElementById("demo").innerHTML=e.message}}),document.getElementById("revert").addEventListener("click",function(t){t.preventDefault(),u(e),document.getElementById("selectdataset-id").value="Dataset",document.getElementById("select-resource").value="Resource",document.getElementById("select-formaat").value="format",document.getElementById("select-aantal").value="resultaat"}),l.addEventListener("change",function(e){!function(e){var t=document.getElementById("textarea_idP1").value,n=t.indexOf("{"),a=[t.slice(0,n+"{".length)," ",e,t.slice(n+"{".length)].join("");document.getElementById("textarea_idP1").value=a}(e.target.value)}),d.addEventListener("change",function(e){!function(e){var t=document.getElementById("textarea_idP1").value,n=t.indexOf("limit"),a=[(t=[t.slice(0,n+5)].join("")).slice(0,n+"limit".length)," ",e,t.slice(n+"limit".length)].join("");document.getElementById("textarea_idP1").value=a}(e.target.value)}),r.addEventListener("click",function(){try{s(),function(){a+=20,document.getElementById("prevbutton").hidden=!1,document.getElementById("prevbutton").disabled=!1;var e=document.getElementById("nextbutton"),t=document.getElementById("prevbutton");e.value="Pagina "+(a/10+2),t.value="Pagina "+a/10}()}catch(e){console.error(e)}}),c.addEventListener("click",function(){try{s(),function(){(a-=10)<=0?(a=0,document.getElementById("prevbutton").disabled=!0):document.getElementById("prevbutton").disabled=!1;var e=document.getElementById("nextbutton"),t=document.getElementById("prevbutton");e.value="Pagina "+(a/10+2),t.value="Pagina "+a/10}()}catch(e){console.error(e)}})}()}();